!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};e[i].call(n.exports,n,n.exports,s);n.l=!0;return n.exports}var i=[{name:"head-dlb/bundle.production.js",path:"head-dlb/static-1.809/bundle.production.js",ids:{}}];s.dlbpr=function(e,t){var n=i[e];if(!n.r){n.r=window["__webpack_require_"+n.name+"__"];if(!n.r)throw new Error("dlb "+n.name+" not loaded");n.r.linkDlb(s,n.ids)}return n.r(t)};s.m=e;s.c=t;s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})};s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};s.t=function(e,t){1&t&&(e=s(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);s.r(i);Object.defineProperty(i,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i};s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};s.d(t,"a",t);return t};s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};s.p="//static.hsappstatic.net/signup-embedder/static-1.1724/";s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var i={};s.r(i);s.d(i,"HANDSHAKE_MESSAGE_TYPE",(function(){return o}));s.d(i,"ACKNOWLEDGE_MESSAGE_TYPE",(function(){return a}));s.d(i,"COOKIE_CONSENT_MESSAGE_TYPE",(function(){return u}));s.d(i,"SIGNUP_STARTED_MESSAGE_TYPE",(function(){return c}));s.d(i,"SIGNUP_REDIRECT_MESSAGE_TYPE",(function(){return d}));s.d(i,"GOOGLE_AUTH_VERIFIED_NEW_USER_MESSAGE_TYPE",(function(){return h}));s.d(i,"GOOGLE_AUTH_VERIFIED_NEW_USER_PORTAL_CREATED_MESSAGE_TYPE",(function(){return p}));s.d(i,"GOOGLE_AUTH_VERIFIED_EXISTING_USER_PORTAL_CREATED_MESSAGE_TYPE",(function(){return l}));s.d(i,"GOOGLE_AUTH_VERIFIED_EXISTING_USER_MESSAGE_TYPE",(function(){return E}));s.d(i,"SIGNUP_INITIAL_FLOW_MESSAGE_TYPE",(function(){return _}));s.d(i,"SIGNUP_FLOW_NAVIGATION_MESSAGE_TYPE",(function(){return S}));s.d(i,"SIGNUP_DATA_MESSAGE_TYPE",(function(){return g}));s.d(i,"SIGNUP_POPUP_BLOCKED_MESSAGE_TYPE",(function(){return I}));s.d(i,"LAUNCH_LOGIN_POPUP_MESSAGE_TYPE",(function(){return m}));let n,r;!function(e){e[e.local=0]="local";e[e.qa=1]="qa";e[e.prod=2]="prod"}(n||(n={}));!function(e){e[e.de=0]="de";e[e.en=1]="en";e[e.es=2]="es";e[e.fr=3]="fr";e[e.ja=4]="ja";e[e.it=5]="it";e[e.nl=6]="nl";e[e.pt=7]="pt";e[e.ptBr=8]="ptBr";e[e.fi=9]="fi";e[e.pl=10]="pl";e[e.sv=11]="sv"}(r||(r={}));const o="HANDSHAKE_MESSAGE_TYPE",a="ACKNOWLEDGE_MESSAGE_TYPE",u="COOKIE_CONSENT_MESSAGE_TYPE",c="SIGNUP_STARTED_MESSAGE_TYPE",d="SIGNUP_REDIRECT_MESSAGE_TYPE",h="GOOGLE_AUTH_VERIFIED_NEW_USER_MESSAGE_TYPE",p="GOOGLE_AUTH_VERIFIED_NEW_USER_PORTAL_CREATED_MESSAGE_TYPE",l="GOOGLE_AUTH_VERIFIED_EXISTING_USER_PORTAL_CREATED",E="GOOGLE_AUTH_VERIFIED_EXISTING_USER",_="SIGNUP_INITIAL_FLOW_MESSAGE_TYPE",S="SIGNUP_FLOW_NAVIGATION_MESSAGE_TYPE",g="SIGNUP_DATA_MESSAGE_TYPE",I="SIGNUP_POPUP_BLOCKED_MESSAGE_TYPE",m="LAUNCH_LOGIN_POPUP_MESSAGE_TYPE";let f=!1;try{f=!!localStorage.getItem("INTERFRAME_DEBUG")}catch(e){}function O(){return f}function P(e,...t){let s="[Interframe]";"string"==typeof e&&(s=`${s} ${e}`);console.log(s,...t)}function U(){return O()?P:()=>{}}const T=()=>Date.now(),N=e=>T()-e;class A{constructor(){this.resolve=null;this.reject=null;this.promise=new Promise((e,t)=>{this.resolve=e;this.reject=t});Object.freeze(this)}}const b={JSON:"json",RAW:"raw",ERROR:"error",API_REQUEST:"api-request",API_RESPONSE:"api-response"},G=e=>{if(e instanceof Error){const{message:t}=e;return{message:t}}return e},R=(e,t)=>{switch(t){case b.JSON:return JSON.stringify(e);case b.ERROR:return G(e);case b.RAW:case b.API_REQUEST:case b.API_RESPONSE:default:return e}},D=(e,t)=>{switch(t){case b.JSON:return JSON.parse(e);case b.ERROR:case b.RAW:case b.API_REQUEST:case b.API_RESPONSE:default:return e}},w=U();let M=0;const L=()=>{M++;return`${window.location.host}-${M}`};class y{constructor(e,t,s={}){this.subscribe=e=>{const t=Symbol();this.subscriptions[t]=e;return{unsubscribe:()=>{delete this.subscriptions[t]}}};this.publish=e=>{const t=Object.getOwnPropertySymbols(this.subscriptions);t.length&&t.forEach(t=>{this.subscriptions[t](e)})};const{middleware:i}=s;this.targetOrigin=e;this.targetWindow=t;this.onMessage=this.onMessage.bind(this);this.postMessage=this.postMessage.bind(this);this.postResponse=this.postResponse.bind(this);this.deferreds={};this.messageMiddleware=i;this.subscriptions={};window.addEventListener("message",this.onMessage,!1)}postMessage(e,t=b.RAW){if("function"==typeof t)throw new Error("Passing a callback to postMessage() is no longer supported.");if(e.response&&e._callbackId){this.postResponse(e,e.response,t);return null}const s={type:t,_start:T(),_callbackId:L(),body:R(e,t)},i=new A;this.deferreds[s._callbackId]=i;w("Posting message to %s",this.targetOrigin,s);this._send(s);return i.promise}postResponse(e,t,s=b.RAW){const{_start:i,_callbackId:n}=e._message,r={type:s,_callbackId:n,_start:i,_end:T(),response:R(t,s)};w("Posting message response to %s",this.targetOrigin,r);this._send(r)}_send(e){this.targetWindow.postMessage(e,this.targetOrigin)}onMessage(e){const{origin:t,data:s}=e;if(t!==this.targetOrigin){w("Message origin %s does not match target origin %s",t,this.targetOrigin,e);return}if(!s||"object"!=typeof s)return;const{_callbackId:i,_start:n,_end:r,body:o,response:a,type:u}=s;let c;if(a&&i){c=D(a,u);w("Received response message from %s in %f ms",e.origin,N(r),c)}else if(o){c=Object.assign({_callbackId:i,_message:s},D(o,u));w("Received message from %s in %f ms",e.origin,N(n),c)}else if(i){c={_callbackId:i,_message:s};w("Received message from %s in %f ms",e.origin,N(n),c)}else{c=s;w("Received message from %s not sent from Interframe",e.origin,c)}this.messageMiddleware&&(c=this.messageMiddleware(c,this.postResponse));if(c){if(a&&i&&this.deferreds[i]){u===b.ERROR?this.deferreds[i].reject(c):this.deferreds[i].resolve(c);this.deferreds[i]=null}this.publish(c)}}destroy(){this.deferred=null;this.subscriptions={};window.removeEventListener("message",this.onMessage,!1)}}let v,C;!function(e){e.Crm="crm";e.FbCrm="fb-crm";e.Marketing="marketing";e.Integrations="integrations";e.Academy="academy";e.Sales="sales";e.Service="service";e.ClassroomTraining="classroom-training";e.Purchase="purchase";e.AssetProvider="asset-provider";e.Developers="developers";e.CmsDevelopers="cms-developers";e.HubspotForStartups="hubspot-for-startups";e.SolutionsProvider="solutions-provider";e.DirectoryListing="directory-listing";e.HubSpotPartners="hubspot-partners";e.Trial="trial";e.StandaloneCmsPartner="standalone-cms-partner";e.CmsFree="cms-free";e.Connect="connect";e.AcademyEmbedded="academy-embedded";e.ChatSpot="chatspot";e.Microapp="microapp";e.Commerce="commerce"}(v||(v={}));!function(e){e.FirstName="first_name";e.LastName="last_name";e.CompanyName="company_name";e.CompanyDomain="company_domain";e.Email="email"}(C||(C={}));const H=(e,t)=>{let s=[];t.forEach((e,t)=>s.push([t,e]));s=s.concat(e);const i=s.reduce((e,[t,s])=>{e.push(`${t}=${encodeURIComponent(s)}`);return e},[]);return s.length?"?"+i.join("&"):""};class F{constructor(e){this.embedder=e}getEnvExtension(){return[n.local,n.qa].includes(this.embedder.getEnvironment())?"qa":""}getSignupSubdomain(){return this.embedder.getEnvironment()===n.local?"local":"app"}getSignupDomain(){return`https://${this.getSignupSubdomain()}.hubspot${this.getEnvExtension()}.com`}getSignupUrl(e=!1,t=!1,s=[]){const i=this.embedder.getOptions();t&&i.setPopupBlocked();const n=t?i.getOptions().filter(e=>{const t=e[0];return s.includes(t)}):this.embedder.getOptions().getQueryStrings(),r=H(n,this.embedder.getQuery()),o=this.embedder.getFlow(),a=this.getSignupDomain(),u=new URL(`${a}/signup-hubspot/${o}${r}`);e&&!t&&u.searchParams.append("isSignupPopup","1");const c=i.affiliateLink;return c?`${c}?u=${encodeURIComponent(u.toString())}`:u.toString()}getLoginUrl(e=!1,t=!1,s=[]){return`https://app.hubspot${this.getEnvExtension()}.com/login?loginRedirectUrl=${encodeURIComponent(this.getSignupUrl(e,t,s))}`}}const V=(e=window)=>e.location.search,j=(e=window)=>V(e).slice(1).split("&").reduce((e,t)=>{const[s,i]=t.split("=");s&&i&&e.push([s,decodeURIComponent(i)]);return e},[]);var W;class ${constructor(){this.affiliateLink=null;this.popupBlocked=!1;this.autofocusDisabled=!0;this.carryParameters=!1;this.shouldRedirectWindow=!0;this.shouldShowMessaging=!1;this.shouldShowFireAlarm=!0;this.shouldEnforceEmailVerification=!1;this.deviceId=null;this.clientId=null;this.scopes=null;this.oauthState=null;this.redirect_uri=null;this.title="HubSpot Signup"}static hasOption(e){return j().some(([t])=>t===e)}static getOptionValue(e){const t=j().find(([t])=>t===e);return t?t[1]:null}setAffiliateLink(e){this.affiliateLink=e;return this}setPopupBlocked(){this.popupBlocked=!0;return this}setAutofocusDisabled(e){this.autofocusDisabled=e;return this}enforceEmailVerification(e){this.shouldEnforceEmailVerification=e;return this}setShouldRedirectWindow(e){this.shouldRedirectWindow=e;return this}setCarryParameters(e){this.carryParameters=e;return this}setTitle(e){e&&"string"==typeof e&&e.trim().length>0&&(this.title=e);return this}setDeviceId(e){this.deviceId=e;return this}setShouldShowMessaging(){this.shouldShowMessaging=!0;return this}setShouldHideFireAlarm(){this.shouldShowFireAlarm=!1;return this}setOAuth(e,t,s,i){this.clientId=e;this.scopes=t;this.redirect_uri=s;i&&(this.oauthState=i);return this}getSignupEmbeddingPage(){return`${window.location.origin}${window.location.pathname}`}getOptions(){const e=[[$.SIGNUP_EMBEDDING_PAGE_OPTION,this.getSignupEmbeddingPage()]];e.push([$.SIGNUP_EMBEDDER_IS_ACTIVE,"1"]);this.shouldShowMessaging&&e.push([$.SIGNUP_SHOULD_SHOW_MESSAGING,"1"]);this.shouldRedirectWindow&&e.push([$.SIGNUP_SHOULD_REDIRECT_WINDOW_OPTION,"1"]);this.shouldShowFireAlarm&&e.push([$.SIGNUP_SHOULD_SHOW_FIREALARM,"1"]);this.autofocusDisabled&&e.push([$.SIGNUP_AUTO_FOCUS_DISABLED_OPTION,"1"]);this.shouldEnforceEmailVerification&&e.push([$.SIGNUP_ENFORCE_EMAIL_VERIFICATION,"1"]);this.popupBlocked&&e.push([$.SIGNUP_POPUP_BLOCKED,"1"]);if(this.deviceId){e.push([$.SIGNUP_DEVIDE_ID_OVERRIDE_OPTION,this.deviceId]);e.push([$.SIGNUP_UUID_OVERRIDE,this.deviceId])}if(this.clientId&&this.scopes&&this.redirect_uri){e.push(["intent","oauthAuthorization"]);e.push([$.SIGNUP_OAUTH_CLIENT_ID,this.clientId]);e.push([$.SIGNUP_OAUTH_SCOPES,this.scopes]);e.push([$.SIGNUP_OAUTH_REDIRECT,this.redirect_uri])}this.oauthState&&e.push([$.SIGNUP_OAUTH_CLIENT_STATE,this.oauthState]);return e}getQueryStrings(){let e=this.getOptions();if(this.carryParameters){const t=j();e=[...e,...t]}return e}}W=$;$.SIGNUP_AUTO_FOCUS_DISABLED_OPTION="_safd";$.SIGNUP_EMBEDDING_PAGE_OPTION="_sebp";$.SIGNUP_DEVIDE_ID_OVERRIDE_OPTION="_sdio";$.SIGNUP_UUID_OVERRIDE="uuid";$.SIGNUP_SHOULD_REDIRECT_WINDOW_OPTION="_ssrw";$.SIGNUP_OAUTH_CLIENT_ID="_soaci";$.SIGNUP_OAUTH_SCOPES="_soas";$.SIGNUP_OAUTH_CLIENT_STATE="_soacs";$.SIGNUP_OAUTH_REDIRECT="_soar";$.SIGNUP_SHOULD_SHOW_MESSAGING="_sssm";$.SIGNUP_SHOULD_SHOW_FIREALARM="_sssf";$.SIGNUP_EMBEDDER_IS_ACTIVE="_seia";$.SIGNUP_ENFORCE_EMAIL_VERIFICATION="_seev";$.SIGNUP_POPUP_BLOCKED="_spb";$.protectedOptions=new Set([W.SIGNUP_AUTO_FOCUS_DISABLED_OPTION,W.SIGNUP_EMBEDDING_PAGE_OPTION,W.SIGNUP_DEVIDE_ID_OVERRIDE_OPTION,W.SIGNUP_UUID_OVERRIDE,W.SIGNUP_SHOULD_REDIRECT_WINDOW_OPTION,W.SIGNUP_OAUTH_CLIENT_ID,W.SIGNUP_OAUTH_SCOPES,W.SIGNUP_OAUTH_CLIENT_STATE,W.SIGNUP_OAUTH_REDIRECT,W.SIGNUP_SHOULD_SHOW_MESSAGING,W.SIGNUP_SHOULD_SHOW_FIREALARM,W.SIGNUP_EMBEDDER_IS_ACTIVE,W.SIGNUP_ENFORCE_EMAIL_VERIFICATION,W.SIGNUP_POPUP_BLOCKED]);class Y{constructor(){this.listeners=[]}push(e,t){if("function"!=typeof t)throw new Error("The listener argument must be a Function instance.");this.listeners.push({type:e,listener:t})}getListeners(e){return e?this.listeners.filter(({type:t})=>t===e):this.listeners}hasListeners(e){return this.listeners.some(({type:t})=>t===e)}}const k=function(e,t,s){$.protectedOptions.has(e)||s.set(e,t)},B=e=>{window.location.replace(e)},K=({signupRedirectUrl:e,popup:t,postMessageListeners:s})=>setTimeout(()=>{t&&!t.closed&&void 0!==t.closed||(s.hasListeners(I)?s.getListeners(I).forEach(({listener:e})=>{e()}):B(e))},1e3),q="menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,titlebar=no,toolbar=no",x=550,Q=800,J=(e=x,t=Q)=>{const{screenY:s,screenX:i,outerHeight:n,outerWidth:r}=window,o=Math.round(s+Math.max(0,Math.floor(n-t)/2)),a=Math.round(i+Math.max(0,Math.floor(r-e)/2));return`${q},width=${e},height=${t},top=${o},left=${a}`},X=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));class z{constructor(){this.options=new $;this.flow=v.Crm;this.prefillableSignupDatapoints=new Set([C.CompanyDomain,C.CompanyName,C.Email,C.FirstName,C.LastName]);this.query=new Map;this.environment=n.prod;this.signupEnvironment=new F(this);this.signupData={};this.postMessageListeners=new Y;this.handshaked=!1;this.handleInterframeMessage=e=>{const{type:t}=e;t&&this.postMessageListeners.getListeners(t).forEach(({listener:t})=>{t.apply(this,[e])})}}static isEmbedded(){return window.top!==window.self}static isPopup(){const e=new URL(window.location.href).searchParams;return Boolean(e.get("isSignupPopup"))}static isActive(){const e=new URL(window.location.href).searchParams,t=Boolean(e.get("_seia"));return this.isPopup()||this.isEmbedded()||t}addPostMessageListener(e,t){this.postMessageListeners.push(e,t);return this}setOptions(e){if(!(e instanceof $))throw new Error("The options arguments needs to be an instance of SignupEmbedderOptions");this.options=e;return this}setFlow(e){if(!Object.values(v).includes(e))throw new Error(`The flow ${e} is invalid. Valid options are: ${Object.values(v).join(", ")}`);this.flow=e;return this}setLanguage(e){if(!Object.values(r).includes(e))throw new Error(`The language ${e} is invalid. Valid options are: ${Object.values(r).join(", ")}`);const t="string"!=typeof e?r[e]:e;this.addQueryParam("lang",t);return this}setEnvironment(e){if(!Object.values(n).includes(e))throw new Error(`The environment ${e} is invalid. Valid options are: ${Object.values(n).join(", ")}`);this.environment="string"==typeof e?n[e]:e;return this}addQueryParam(e,t){if("object"==typeof e&&void 0===t){const t=e;Object.entries(t).forEach(([e,t])=>{k(e,t,this.query)})}else e&&"string"==typeof e&&t&&"string"==typeof t&&k(e,t,this.query);return this}setSignupData(e,t){if("object"==typeof e&&void 0===t){const t=e;Object.entries(t).forEach(([e,t])=>{const s=e;s&&this.prefillableSignupDatapoints.has(s)&&null!=t&&(this.signupData=Object.assign({},this.signupData,{[e]:t}))})}else e&&"string"==typeof e&&t&&"string"==typeof t&&this.prefillableSignupDatapoints.has(e)&&(this.signupData=Object.assign({},this.signupData,{[e]:t}));return this}attachTo(e){if(!e)throw new Error(`You must provide a valid HTML element to attach an instance of signup. The value received was ${e}.`);let t;if(e instanceof HTMLElement||"string"!=typeof e)t=e;else{const s=document.querySelector(e);if(!s)throw new Error(`You must provide a valid HTML element to attach an instance of signup. The value received was ${e}.`);t=s}const s=this.buildIframe();this.beforeAttach();this.prepareElement(t).appendChild(s);s.contentWindow&&this.setupInterframe(s.contentWindow);return this}asPopup(e=!1,t=J()){const s=e?this.signupEnvironment.getLoginUrl(!0):this.signupEnvironment.getSignupUrl(!0),i=window.open(s,"Get started with HubSpot",t);try{if(!i||i.closed||void 0===i.closed)throw new Error("Popup failed to open: "+new URL(s).pathname);i.focus()}catch(e){throw new Error("Popup failed to open: "+new URL(s).pathname)}this.beforeAttach();if(i){this.setupInterframe(i);const t=[$.SIGNUP_OAUTH_CLIENT_ID,$.SIGNUP_OAUTH_REDIRECT,$.SIGNUP_OAUTH_SCOPES,$.SIGNUP_OAUTH_CLIENT_STATE,$.SIGNUP_UUID_OVERRIDE,$.SIGNUP_DEVIDE_ID_OVERRIDE_OPTION,$.SIGNUP_POPUP_BLOCKED],s=e?this.signupEnvironment.getLoginUrl(!0,!0,t):this.signupEnvironment.getSignupUrl(!0,!0,t),n=K({signupRedirectUrl:s,popup:i,postMessageListeners:this.postMessageListeners});window.onbeforeunload=()=>{clearTimeout(n)}}return i}openAsPopup({goToLogin:e=!1,windowOptions:t=J()}){return this.asPopup(e,t)}getSignupPopupConfiguration(e=!1){return{url:e?this.signupEnvironment.getLoginUrl():this.signupEnvironment.getSignupUrl(),windowOptions:J(),title:"Get started with HubSpot"}}getEnvironment(){return this.environment}getOptions(){return this.options}getFlow(){return this.flow}getQuery(){return this.query}getInterframe(){return this.interframe}getPostMessageListeners(){return this.postMessageListeners}setupInterframe(e){const t=this.signupEnvironment.getSignupDomain();this.interframe=new y(t,e,!0);setTimeout(()=>{this.interframe.subscribe(this.handleInterframeMessage)})}setupDefaultPostMessageHandlers(){this.postMessageListeners.hasListeners(d)||this.addPostMessageListener(d,this.handleSignupRedirectMessage);this.addPostMessageListener(c,this.handleAppStartedMessage)}beforeAttach(){this.setupDefaultPostMessageHandlers()}postCookieConsentMessage(e,t=X()){this.interframe.postMessage({type:u,consent:e,deviceId:t},b.JSON)}handleAppStartedMessage(){this.interframe.postMessage({type:o},b.JSON).then(e=>{this.handshaked=e.type===a}).catch(e=>console.log("SignupEmbedder Error: "+e));Object.keys(this.signupData).length>0&&this.interframe.postMessage({type:g,data:this.signupData},b.JSON)}handleSignupRedirectMessage(e){const{url:t}=e;t&&window.location.replace(t)}prepareElement(e){const t=document.createElement("div");t.classList.add("signup-embedded__wrapper");t.style.position="relative";t.style.width="100%";t.style.height="100%";t.style.minHeight="800px";e.appendChild(t);return t}buildIframe(){const e=document.createElement("iframe");e.classList.add("signup-embedded__iframe");e.id="signup-embedded";e.title=this.options.title;e.style.position="absolute";e.style.width="100%";e.style.height="100%";e.style.border="none";e.referrerPolicy="origin";e.scrolling="yes";e.src=this.signupEnvironment.getSignupUrl();console.log(e.src);return e}}s.d(t,"SignupEmbedder",(function(){return z}));s.d(t,"SignupEmbedderOptions",(function(){return $}));const Z=window;Z.SignupEmbedder=z;Z.SignupEmbedderOptions=$;Z.SignupEmbedderMessageTypes=i;Z.SignupEmbedderEnvironments=n;Z.SignupEmbedderLanguages=r}]);
//# sourceMappingURL=//static.hsappstatic.net/signup-embedder/static-1.1724/js/embedder.js.map